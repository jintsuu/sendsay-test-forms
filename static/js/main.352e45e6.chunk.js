(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(2),l=a.n(r),i=a(3),o=a(4),m=a(7),c=a(5),u=a(8),d=a(6),p=a.n(d),f=function(e){var t=e.buttonCounter,a=e.addFile,n=e.deleteFile,r=e.index;return s.a.createElement("div",{className:"file-input-wrapper",id:"button-".concat(r)},s.a.createElement("input",{className:"file-input",type:"file",id:"file-".concat(r),onChange:function(e){return a(e.target.files[0])}}),s.a.createElement("label",{htmlFor:"file-".concat(r),className:"file-label",id:"label-".concat(r)},"Add some file into me!"),s.a.createElement("img",{src:p.a,alt:"Delete",className:t===r?"disabled":"delete-btn",onClick:function(){return n(r)}}))},g=function(e){var t=e.isMessagesSended,a=e.messages;return s.a.createElement("div",{className:t?"messages-box":"disabled"},s.a.createElement("div",{className:"messages-box__wrapper"},s.a.createElement("ul",{className:"messages-box__titles"},s.a.createElement("li",{className:"titles__item"},"Date"),s.a.createElement("li",{className:"titles__item"},"Subject"),s.a.createElement("li",{className:"titles__item"},"Status")),s.a.createElement("hr",null),s.a.createElement("div",{className:"messages"},a.reverse().map(function(e,t){return s.a.createElement("div",{className:"messages__item",key:t},s.a.createElement("p",{className:"item__date"},e.date),s.a.createElement("p",{className:"item__subject"},e.subject),s.a.createElement("p",{className:"item__status"},e.status))}))))},v=(a(15),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(c.a)(t).call(this))).dropRef=s.a.createRef(),e.handleDrag=function(e){e.preventDefault(),e.stopPropagation()},e.handleDragIn=function(t){t.preventDefault(),t.stopPropagation(),e.dragCounter++,t.dataTransfer.items&&t.dataTransfer.items.length>0&&e.setState({dragging:!0})},e.handleDragOut=function(t){t.preventDefault(),t.stopPropagation(),e.dragCounter--,0===e.dragCounter&&e.setState({dragging:!1})},e.handleDrop=function(t){t.preventDefault(),t.stopPropagation(),e.setState({dragging:!1});var a=t.dataTransfer.files;if(a&&a.length>0)for(var n=0,s=a.length;n<s;n++)e.addFile(a[n])},e.addButtonsIntoArr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=e.state.buttons;a.push({component:"",number:t}),e.setState({buttons:a})},e.addFile=function(t){var a,n=e.state.buttonCounter,s=e.state.sizes,r=t.size/1024/1024,l=r+e.state.sizeSum,i=document.getElementById("label-".concat(n)),o=document.getElementById("file-".concat(n)),m=new FileReader;r<5&&l<20?(o.setAttribute("disabled",""),m.onload=function(s){a=s.target.result,e.state.files.push({file:{name:t.name,content:a,encoding:"base64"},number:n})},console.log(e.state.files),m.readAsDataURL(t),i.innerHTML=t.name,n++,s.push({size:r,number:n}),e.setState({buttonCounter:n,sizeSum:l,sizes:s},function(){return e.addButtonsIntoArr(n)})):r>5?(alert("Size of file too large!"),o.value=""):l>20&&(alert("Sum of file's sizes too large!"),o.value="")},e.deleteFile=function(t){var a,n=e.state.buttons,s=e.state.files,r=e.state.sizes;s=s.filter(function(e){return e.number!==t+1}),n=n.filter(function(e){return e.number!==t}),a=(r=r.filter(function(e){return e.number!==t+1})).reduce(function(e,t){return e+t.size},0),console.log(s),e.setState({files:s,sizeSum:a,sizes:r,buttons:n})},e.sendMail=function(t){t.preventDefault();var a=document.getElementById("fromName"),n=document.getElementById("fromMail"),s=document.getElementById("toName"),r=document.getElementById("toMail"),l=document.getElementById("subject"),i=document.getElementById("text"),o=new Date,m="".concat(o.getDate()," ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()]," ").concat(o.getFullYear()," ").concat(o.getHours(),":").concat(o.getMinutes(),":").concat(o.getSeconds()),c={subject:l.value,fromName:a.value,fromMail:n.value,toName:s.value,toMail:r.value,text:i.value,date:m,status:"sended"},u=e.state.messages;u.push(c),e.setState({messages:u,isMessagesSended:!0});var d={action:"issue.send.test",letter:{subject:l.value,"from.name":a.value,"from.email":n.value,"to.name":s.value,message:{text:i.value},attaches:e.state.files},sendwhen:"test",mca:[r.value],session:"\u0411\u0440\u0430\u0442\u044c \u0438\u0437 cookies \u043f\u043e \u043a\u043b\u044e\u0447\u0443 session"},p="request="+encodeURIComponent(JSON.stringify(d));fetch("https://api.sendsay.ru/?apiversion=100&json=1&",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:p}).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)}),a.value="",n.value="",s.value="",r.value="",l.value="",i.value="",e.setState({sizeSum:0,buttonCounter:1,files:[],sizes:[],buttons:[]},function(){return e.addButtonsIntoArr()})},e.state={buttonCounter:1,sizeSum:0,sizes:[],buttons:[],files:[],dragging:!1,messages:[],isMessagesSended:!1},e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.dragCounter=0;var e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop),this.addButtonsIntoArr()}},{key:"componentWillUnmount",value:function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}},{key:"render",value:function(){var e=this,t=this.state,a=t.buttonCounter,n=t.dragging,r=t.sizeSum,l=t.isMessagesSended,i=t.messages,o=t.buttons;return s.a.createElement("div",{className:"App"},s.a.createElement("form",{onSubmit:this.sendMail,className:"form",ref:this.dropRef},s.a.createElement("div",{className:n?"drop-zone":"disabled"},s.a.createElement("div",{className:"drop-zone--inner"},s.a.createElement("p",{className:"drop-zone__text"},"Drop me Here!"))),s.a.createElement("h1",{className:"form__heading"},"BestMail"),s.a.createElement("div",{className:"form__inputs"},s.a.createElement("div",{className:"input-wrapper"},s.a.createElement("input",{className:"input",type:"text",id:"fromName",name:"from-name",minLength:"2",maxLength:"20",placeholder:"Your Name",required:!0}),s.a.createElement("label",{htmlFor:"from-name",className:"label"},"Your Name")),s.a.createElement("div",{className:"input-wrapper"},s.a.createElement("input",{className:"input",type:"email",id:"fromMail",name:"from-mail",placeholder:"Your Email",required:!0}),s.a.createElement("label",{htmlFor:"from-name",className:"label"},"Your Email")),s.a.createElement("div",{className:"input-wrapper"},s.a.createElement("input",{className:"input",type:"text",id:"toName",name:"to-name",minLength:"2",maxLength:"20",placeholder:"Receiver Name",required:!0}),s.a.createElement("label",{htmlFor:"from-name",className:"label"},"Receiver Name")),s.a.createElement("div",{className:"input-wrapper"},s.a.createElement("input",{className:"input",type:"email",id:"toMail",name:"to-mail",placeholder:"Receiver Email",required:!0}),s.a.createElement("label",{htmlFor:"from-name",className:"label"},"Receiver Email")),s.a.createElement("div",{className:"input-wrapper input--subject"},s.a.createElement("input",{className:"input",type:"text",id:"subject",name:"subject",minLength:"4",placeholder:"Message Subject",required:!0}),s.a.createElement("label",{htmlFor:"subject",className:"label"},"Message Subject"))),s.a.createElement("textarea",{className:"textarea",id:"text",rows:"7",placeholder:"Write your message here!",minLength:"10",required:!0}),s.a.createElement("div",{className:"files"},o.map(function(t){return t.component=s.a.createElement(f,{buttonCounter:a,index:t.number,key:t.number,addFile:e.addFile,deleteFile:e.deleteFile}),t.component})),s.a.createElement("div",{className:"files-size"},s.a.createElement("p",null,"Total size of files: ",r," MB"),s.a.createElement("p",null,"Max size of one file: 5 MB"),s.a.createElement("p",null,"Max size of all files: 20 MB")),s.a.createElement("input",{type:"submit",className:"submit-btn",value:"Send!"})),s.a.createElement(g,{isMessagesSended:l,messages:i}))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},6:function(e,t,a){e.exports=a.p+"static/media/del.fd8b42e2.svg"},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.352e45e6.chunk.js.map